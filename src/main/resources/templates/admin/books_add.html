<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<title>Sản phẩm</title>
	<meta content="" name="description">
	<meta content="" name="keywords">
	<div th:replace="admin/fragments/head :: head"></div>
</head>

<body>
	<!-- ======= Header ======= -->
	<header th:replace="admin/fragments/header :: header">
	</header>
	<!-- ======= Sidebar ======= -->
	<aside id="sidebar" class="sidebar">

		<ul class="sidebar-nav" id="sidebar-nav">

			<li class="nav-item">
				<a class="nav-link collapsed" th:href="@{/admin}">
					<i class="bi bi-grid"></i>
					<span>Tổng quan</span>
				</a>
			</li> <!-- End Dashboard Nav -->

			<li class="nav-item">
				<a class="nav-link collapsed" data-bs-target="#user-nav" data-bs-toggle="collapse" href="#">
					<i class="bi bi-people"></i><span>Người dùng</span><i class="bi bi-chevron-down ms-auto"></i>
				</a>
				<ul id="user-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
					<li>
						<a th:href="@{/admin/users_management}">
							<i class="bi bi-list-ul"></i><span>Danh sách</span>
						</a>
					</li>
				</ul>
			</li><!-- End Users Nav -->

			<li class="nav-item">
				<a class="nav-link collapsed" data-bs-target="#category-nav" data-bs-toggle="collapse" href="#">
					<i class="bi bi-journal-medical"></i><span>Danh mục</span><i class="bi bi-chevron-down ms-auto"></i>
				</a>
				<ul id="category-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
					<li>
						<a th:href="@{/admin/categories_management}">
							<i class="bi bi-list-ul"></i><span>Danh sách</span>
						</a>
					</li>
					<li>
						<a th:href="@{/admin/categories_management/add}">
							<i class="bi bi-person-plus-fill"></i><span>Thêm mới</span>
						</a>
					</li>
				</ul>
			</li><!-- End Categorys Nav -->

			<li class="nav-item">
				<a class="nav-link" data-bs-target="#product-nav" data-bs-toggle="collapse" href="#">
					<i class="bi bi-journal-bookmark"></i><span>Sản phẩm</span><i
						class="bi bi-chevron-down ms-auto"></i>
				</a>
				<ul id="product-nav" class="nav-content collapse show" data-bs-parent="#sidebar-nav">
					<li>
						<a th:href="@{/admin/books_management}">
							<i class="bi bi-list-ul"></i><span>Danh sách</span>
						</a>
					</li>
					<li>
						<a th:href="@{/admin/books_management/add}" class="active">
							<i class="bi bi-person-plus-fill"></i><span>Thêm mới</span>
						</a>
					</li>
				</ul>
			</li>

			<li class="nav-item">
				<a class="nav-link collapsed" data-bs-target="#oder-nav" data-bs-toggle="collapse" href="#">
					<i class="bi bi-basket2"></i><span>Đơn hàng</span><i class="bi bi-chevron-down ms-auto"></i>
				</a>
				<ul id="oder-nav" class="nav-content collapse " data-bs-parent="#sidebar-nav">
					<li>
						<a th:href="@{/admin/orders_management}">
							<i class="bi bi-list-ul"></i><span>Danh sách</span>
						</a>
					</li>
				</ul>
			</li>
			<li class="nav-item">
				<a class="nav-link collapsed" th:href="@{/admin/contacts}">
					<i class="bi bi-chat-left-text"></i>
					<span>Liên hệ</span>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link collapsed" th:href="@{/logout}">
					<i class="bi bi-box-arrow-in-right"></i>
					<span>Đăng xuất</span>
				</a>
			</li>
		</ul>
	</aside>

	<!-- ======= Main ======= -->
	<main id="main" class="main">

		<div class="pagetitle d-flex">
			<h1>Thêm sản phẩm</h1>
			<nav class="ms-auto">
				<ol class="breadcrumb">
					<li class="breadcrumb-item"><a th:href="@{/admin}"><i class="bi bi-house"></i></a></li>
					<li class="breadcrumb-item active">Sản phẩm</li>
				</ol>
			</nav>
		</div><!-- End Page Title -->

		<form th:action="@{/admin/books_management/add_or_update}" th:object="${book}" method="post"
			enctype="multipart/form-data">
			<div class="row mb-3">
				<label for="bookTitle" class="col-sm-2 col-form-label">Tiêu đề</label>
				<div class="col-sm-10">
					<input id="bookTitle" required type="text" class="form-control" th:field="*{title}"
						placeholder="Nhập tiêu đề sách" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="bookAuthor" class="col-sm-2 col-form-label">Tác giả</label>
				<div class="col-sm-10">
					<input id="bookAuthor" required type="text" class="form-control" th:field="*{author}"
						placeholder="Nhập tên tác giả" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="bookPublisher" class="col-sm-2 col-form-label">Nhà xuất bản</label>
				<div class="col-sm-10">
					<input id="bookPublisher" required type="text" class="form-control" th:field="*{publisher}"
						placeholder="Nhập tên nhà xuất bản sách" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="bookPublisher" class="col-sm-2 col-form-label">Nhà cung cấp</label>
				<div class="col-sm-10">
					<input id="bookPublisher" required type="text" class="form-control" th:field="*{supplier}"
						placeholder="Nhập tên nhà cung cấp sách" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="publishedDate" class="col-sm-2 col-form-label">Năm xuất bản</label>
				<div class="col-sm-10">
					<input id="publishedDate" required type="number" class="form-control" th:field="*{publishedDate}"
						placeholder="Nhập năm xuất bản" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputNumber" class="col-sm-2 col-form-label">Số trang</label>
				<div class="col-sm-10">
					<input id="numberOfPages" required type="number" class="form-control" th:field="*{numberOfPages}"
						placeholder="Nhập số trang" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputNumber" class="col-sm-2 col-form-label">Trọng lượng(gr)</label>
				<div class="col-sm-10">
					<input id="numberOfPages" required type="number" class="form-control" th:field="*{weight}"
						placeholder="Nhập trọng lượng" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputEmail" class="col-sm-2 col-form-label">Hình thức</label>
				<div class="col-sm-10">
					<input id="bookPublisher" required type="text" class="form-control" th:field="*{layout}"
						placeholder="Nhập hình thức" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="categoryId" class="col-sm-2 col-form-label">Danh mục</label>
				<div class="col-sm-10">
					<select id="categoryId" required class="form-select" th:field="*{category.id}"
						aria-label="Default select example">
						<option value="-1" selected>Chọn danh mục</option>
						<option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}">
						</option>
					</select>
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputNumber" class="col-sm-2 col-form-label">Số lượng</label>
				<div class="col-sm-10">
					<input id="quantity" required type="number" class="form-control" th:field="*{qty}"
						placeholder="Nhập số lượng" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputNumber" class="col-sm-2 col-form-label">Giá gốc</label>
				<div class="col-sm-10">
					<input id="originalPrice" required type="number" step="0.01" class="form-control"
						th:field="*{originalPrice}" placeholder="Nhập giá gốc" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputNumber" class="col-sm-2 col-form-label">Giá bán</label>
				<div class="col-sm-10">
					<input id="salePrice" required type="number" step="0.01" class="form-control"
						th:field="*{salePrice}" placeholder="Nhập giá sale" />
				</div>
			</div>

			<div class="row mb-3">
				<label for="inputPassword" class="col-sm-2 col-form-label">Mô tả</label>
				<div class="col-sm-10">
					<textarea id="description" required rows="6" class="form-control" th:field="*{description}"
						placeholder="Nhập mô tả sách"></textarea>
				</div>
			</div>


			<div class="row mb-3">
				<label for="inputNumber" class="col-sm-2 col-form-label">Ảnh bìa</label>
				<div class="col-sm-10">
					<div class="input-group mb-3">
						<input type="file" class="form-control" id="inputGroupFile02" name="cover_image"
							onchange="previewImage(this)" />
					</div>
					<div id="imagePreview" style="max-width: 300px;">
						<!-- Hiển thị ảnh cũ nếu có -->
						<img th:if="${book.coverImage}" th:src="@{/cover_images/__${book.coverImage}__}"
							style="max-width: 100%;" alt="cover image" />
					</div>
				</div>
			</div>


			<div class="text-center">
				<button type="button" onclick="window.history.back()" class="btn btn-secondary">Quay
					lại</button>
				<button type="submit" class="btn btn-primary">Thêm mới</button>
			</div>
		</form>
		<script>
			function previewImage(input) {
				const preview = document.getElementById("imagePreview");

				if (input.files && input.files[0]) {
					const reader = new FileReader();

					reader.onload = function (e) {
						const img = document.createElement("img");
						img.src = e.target.result;
						img.style.maxWidth = "100%";
						preview.innerHTML = "";
						preview.appendChild(img);
					};

					reader.readAsDataURL(input.files[0]);
				}
			}
		</script>
	</main>

	<!-- ======= Footer ======= -->
	<footer th:replace="admin/fragments/footer :: footer"></footer>

	<a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
			class="bi bi-arrow-up-short"></i></a>

	<!-- Vendor JS Files -->
	<script th:src="@{/vendor/apexcharts/apexcharts.min.js}"></script>
	<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
	<script th:src="@{/vendor/chart.js/chart.umd.js}"></script>
	<script th:src="@{/vendor/echarts/echarts.min.js}"></script>
	<script th:src="@{/vendor/quill/quill.js}"></script>
	<script th:src="@{/vendor/simple-datatables/simple-datatables.js}"></script>
	<script th:src="@{/vendor/tinymce/tinymce.min.js}"></script>
	<script th:src="@{/vendor/php-email-form/validate.js}"></script>

	<!-- Template Main JS File -->
	<script th:src="@{/js/admin/main.js}"></script>
</body>

</html>